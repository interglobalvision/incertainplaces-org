{"version":3,"sources":["main.js"],"names":["afterAjaxLoad","ajaxContent","detectBrightness","fullWidth","getImageBrightness","init","l","layout","marginBasic","openLevel1","removeHomeSlides","submenus","windowHeight","windowWidth","mobileWidth","data","console","log","$","window","innerWidth","innerHeight","parseInt","css","on","resize","document","load","ready","ajaxArtistLinks","ajaxLinks","ajaxProjectLinks","ajaxStudentLinks","homeSlide","homeSlideLength","homeSlideshow","target","tooltip","tooltipOffset","location","hash","substr","perfectScrollbar","suppressScrollX","hasClass","length","each","background","this","setInterval","active","activeIndex","next","clearInterval","index","removeClass","eq","addClass","click","e","width","preventDefault","toggle","toggleClass","hide","show","parents","mouseenter","image","attr","mousemove","top","pageY","left","pageX","mouseleave","off","hover","children","keypress","which","trigger","submit","dataArray","url","stopPropagation","replace","concat","serializeArray","item","name","value","ajax","dataType","error","err","text","alert","success","result","msg","val","html","href","textContent","scrollToBottom","cycle","Modernizr","history","pushState","content","imagesLoaded","animate","scrollTop","height","title","offset","remove","img","canvas","brightness","imageSrc","callback","colorSum","createElement","src","style","display","body","appendChild","onload","avg","b","ctx","g","imageData","len","r","x","getContext","drawImage","getImageData","Math","floor"],"mappings":"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","file":"main.min.js","sourcesContent":["var afterAjaxLoad, ajaxContent, detectBrightness, fullWidth, getImageBrightness, init, l, layout, marginBasic, openLevel1, removeHomeSlides, submenus, windowHeight, windowWidth;\n\nfullWidth = 1487;\nmobileWidth = 600;\n\nl = function(data) {\n  return console.log(data);\n};\n\nwindowWidth = $(window).innerWidth();\n\nwindowHeight = $(window).innerHeight();\n\nmarginBasic = parseInt($('#main-container').css('padding-top'));\n\nsubmenus = $('.submenu');\n\najaxContent = $('#ajax-content');\n\ninit = function() {\n  $(window).on({\n    'resize': function() {\n      layout();\n    },\n  });\n};\n\n$(document).on({\n  'load': function() {\n    init();\n    layout();\n  },\n});\n\n$(document).ready(function($) {\n  var ajaxArtistLinks, ajaxLinks, ajaxProjectLinks, ajaxStudentLinks, homeSlide, homeSlideLength, homeSlideshow, target, tooltip, tooltipOffset;\n\n  if (window.location.hash) {\n    target = window.location.hash.substr(3);\n    if (target === 'menu') {\n      removeHomeSlides();\n      window.location.hash = '';\n    } else {\n      openLevel1(target);\n      window.location.hash = '';\n    }\n  }\n\n  $('.col-inner').perfectScrollbar({\n    'suppressScrollX': true,\n  });\n\n  layout();\n\n  if ($('body').hasClass('home')) {\n    homeSlide = $('.home-slide');\n    homeSlideLength = homeSlide.length;\n    homeSlide.each(function() {\n      var background;\n\n      background = $(this).data('background');\n      return detectBrightness($(this), background);\n    });\n\n    homeSlideshow = window.setInterval(function() {\n      var active, activeIndex, background, next;\n\n      if ($('#home-slides').length) {\n        active = $('.home-slide.active');\n        activeIndex = active.index();\n        active.data('background', false);\n        if (activeIndex === (homeSlideLength - 1)) {\n          homeSlide.css('opacity', 0).removeClass('active');\n          next = homeSlide.eq(0);\n          next.css('opacity', 1).addClass('active');\n          if (next.data('brightness')) {\n            return $('body').removeClass('active-slide-dark').removeClass('active-slide-light').addClass('active-slide-' + next.data('brightness'));\n          }\n        } else {\n          homeSlide.css('opacity', 0).removeClass('active');\n          next = homeSlide.eq(activeIndex + 1);\n          background = next.data('background');\n          if (next.data('background')) {\n            next.css('background-image', 'url(' + background + ')').data('background', false);\n          }\n\n          next.css('opacity', 1).addClass('active');\n          if (next.data('brightness')) {\n            return $('body').removeClass('active-slide-dark').removeClass('active-slide-light').addClass('active-slide-' + next.data('brightness'));\n          }\n        }\n      } else {\n        return window.clearInterval(homeSlideshow);\n      }\n    }, 4500);\n\n    $('#home-click').click(function() {\n      removeHomeSlides();\n      window.clearInterval(homeSlideshow);\n      return $('body').removeClass('active-slide-dark').removeClass('active-slide-light').removeClass('no-min-width');\n    });\n  }\n\n  $('.menu-item').click(function(e) {\n    target = $(this).data('target');\n\n    // If desktop, toggle drawers\n    if( $(window).width() > mobileWidth ) {\n      if ($('.home').length) {\n        e.preventDefault();\n        $('#home-' + target).toggle();\n        $(this).toggleClass('active');\n        return layout();\n      } else if (target === 'shop') {\n\n      } else if ($('.single-' + target).length || $('.post-type-archive-' + target).length) {\n        e.preventDefault();\n        $('.submenu-level-2').hide();\n        $('.submenu-level-3').hide();\n        $('#submenu-level-1').toggle();\n        return layout();\n      }\n    } // Else, normal link behavior\n\n  });\n  $('.js-open-level-1').click(function(e) {\n    target = $(this).data('target');\n\n    openLevel1(target);\n    return layout();\n  });\n  $('.js-open-level-2').click(function(e) {\n    target = $(this).data('target');\n\n    submenus.hide();\n    $('#submenu-level-1').show();\n    $(this).parents('.submenu-level-2').show();\n    $('.submenu-level-2 a').removeClass('active-ajax');\n    $('#submenu-' + target).show();\n    return layout();\n  });\n\n  if ($('html').hasClass('no-touch')) {\n    tooltip = $('#tooltip');\n    tooltipOffset = 10;\n\n    $('.js-tooltip').on({\n      'mouseenter': function() {\n        var image;\n\n        image = $(this).data('hover-image');\n        tooltip.attr('src', image).show();\n        return $(window).mousemove(function(e) {\n          return tooltip.css({\n            'top': (e.pageY + tooltipOffset) + 'px',\n            'left': (e.pageX + tooltipOffset) + 'px',\n          });\n        });\n      },\n\n      'mouseleave': function() {\n        $(window).off();\n        return tooltip.hide();\n      },\n    });\n  }\n\n  $('.has-hover-image').hover(function() {\n    if (!$(this).hasClass('js-lazy-loaded')) {\n      target = $(this).children().children();\n      target.attr('src', target.data('src'));\n      return $(this).addClass('js-lazy-loaded');\n    }\n  });\n\n  $('#mce-EMAIL').keypress(function(e) {\n    if (e.which === 10 || e.which === 13) {\n      return $('#mc-embedded-subscribe-form').trigger('submit');\n    }\n  });\n\n  $('#mc-embedded-subscribe-form').submit(function(e) {\n    var data, dataArray, url;\n\n    e.preventDefault();\n    e.stopPropagation();\n    url = $(this).attr('action').replace('/post?', '/post-json?').concat('&c=?');\n    data = {};\n    dataArray = $(this).serializeArray();\n    $.each(dataArray, function(index, item) {\n      return data[item.name] = item.value;\n    });\n    $.ajax({\n      url: url,\n      data: data,\n      dataType: 'jsonp',\n      error: function(err, text) {\n        l(\"Mailchimp error:\");\n        l(text);\n        l(err);\n        return alert(\"Subscription failure.\");\n      },\n\n      success: function(data) {\n        if (data.result === \"success\") {\n          $('#mc-embedded-subscribe-form').hide();\n          return $('#mc-embedded-subscribe-thanks').show();\n        } else {\n          l(data);\n          return alert(\"Subscription failure. \" + data.msg);\n        }\n      },\n    });\n    return $('#mce-EMAIL').val('');\n  });\n\n  ajaxLinks = $('.js-ajax');\n  ajaxLinks.click(function(e) {\n    e.preventDefault();\n    ajaxContent.html('loading...').load(e.target.href + ' article.js-content', function() {\n      return afterAjaxLoad(e.target.textContent, e.target.href);\n    }).show();\n    scrollToBottom();\n    ajaxLinks.removeClass('active-ajax');\n    return $(this).addClass('active-ajax');\n  });\n\n  ajaxProjectLinks = $('.js-ajax-projects');\n  ajaxProjectLinks.click(function(e) {\n    if ($('.single-projects').length || $('.post-type-archive-projects').length) {\n      e.preventDefault();\n      ajaxContent.html('loading...').load(e.target.href + ' article.js-content', function() {\n        return afterAjaxLoad(e.target.textContent, e.target.href);\n      }).show();\n      scrollToBottom();\n      ajaxProjectLinks.removeClass('active-ajax');\n      return $(this).addClass('active-ajax');\n    }\n  });\n\n  ajaxArtistLinks = $('.js-ajax-artists');\n  ajaxArtistLinks.click(function(e) {\n    if ($('.single-artists').length || $('.post-type-archive-artists').length) {\n      e.preventDefault();\n      ajaxContent.html('loading...').load(e.target.href + ' article.artists', function() {\n        return afterAjaxLoad(e.target.textContent, e.target.href);\n      }).show();\n      scrollToBottom();\n      ajaxArtistLinks.removeClass('active-ajax');\n      return $(this).addClass('active-ajax');\n    }\n  });\n\n  ajaxStudentLinks = $('.js-ajax-students');\n  ajaxStudentLinks.click(function(e) {\n    if ($('.single-students').length || $('.post-type-archive-students').length || $('.page').length) {\n      e.preventDefault();\n      ajaxContent.html('loading...').load(e.target.href + ' article.students', function() {\n        return afterAjaxLoad(e.target.textContent, e.target.href);\n      }).show();\n      scrollToBottom();\n      ajaxStudentLinks.removeClass('active-ajax');\n      return $(this).addClass('active-ajax');\n    }\n  });\n\n  return $('.js-open-ma-information').click(function(e) {\n    e.preventDefault();\n    submenus.hide();\n    ajaxStudentLinks.removeClass('active-ajax');\n    $('#submenu-level-1').show();\n    target = $(this).data('target');\n    return ajaxContent.html('loading...').load(target + ' article.js-content', function() {\n      $('.cycle-slideshow').cycle();\n      if (Modernizr.history) {\n        history.pushState(null, null, target);\n      }\n\n      return content.imagesLoaded(function() {\n        return layout();\n      }).animate({\n        scrollTop: 0,\n      }, 'fast');\n    }).show();\n  });\n});\n\nlayout = function() {\n  windowWidth = $(window).innerWidth();\n  windowHeight = $(window).innerHeight();\n\n  if (windowWidth > mobileWidth) {\n    return $('.col').css({\n      'height': (windowHeight - marginBasic) + 'px',\n    });\n  } else {\n    return $('.col').css({\n      'height': 'auto',\n    });\n  }\n};\n\nafterAjaxLoad = function(title, href) {\n  $('.cycle-slideshow').cycle();\n\n  if (Modernizr.history) {\n    history.pushState(null, title, href);\n  }\n\n  $('#main-content').imagesLoaded(function() {\n    return $('#ajax-content').perfectScrollbar('destroy').perfectScrollbar({\n      'suppressScrollX': true,\n    });\n  }).animate({\n    scrollTop: 0,\n  }, 'fast');\n\n  // On mobile scroll to loaded content\n  if( $(window).width() <= mobileWidth ) {\n    $('html, body').animate({\n      scrollTop: $('#main-content').offset().top - 13,\n    }, 'fast');\n  }\n\n  return init();\n};\n\nremoveHomeSlides = function() {\n  $('#home-click').remove();\n  $('#home-slides').remove();\n\n  return $('#menu').show();\n};\n\nopenLevel1 = function(target) {\n  submenus.hide();\n  $('#submenu-level-1').show();\n\n  return $('#submenu-' + target).show();\n};\n\ndetectBrightness = function(target, img) {\n  if (Modernizr.canvas) {\n    return getImageBrightness(img, function(brightness) {\n      if (brightness > 127.5) {\n        target.addClass('font-dark').data('brightness', 'dark');\n        if (target.hasClass('active')) {\n          return $('body').addClass('active-slide-dark');\n        }\n      } else {\n        target.addClass('font-light').data('brightness', 'light');\n        if (target.hasClass('active')) {\n          return $('body').addClass('active-slide-light');\n        }\n      }\n    });\n  }\n};\n\ngetImageBrightness = function(imageSrc, callback) {\n  var colorSum, img;\n\n  img = document.createElement(\"img\");\n  img.src = imageSrc;\n  img.style.display = \"none\";\n  document.body.appendChild(img);\n  colorSum = 0;\n  return img.onload = function() {\n    var avg, b, brightness, canvas, ctx, data, g, imageData, len, r, x;\n\n    canvas = document.createElement(\"canvas\");\n    canvas.width = this.width;\n    canvas.height = this.height;\n    ctx = canvas.getContext(\"2d\");\n    ctx.drawImage(this, 0, 0);\n    imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n    data = imageData.data;\n    r;\n    g;\n    b;\n    avg;\n    x = 0;\n    len = data.length;\n    while (x < len) {\n      r = data[x];\n      g = data[x + 1];\n      b = data[x + 2];\n      avg = Math.floor((r + g + b) / 3);\n      colorSum += avg;\n      x += 4;\n    }\n\n    brightness = Math.floor(colorSum / (this.width * this.height));\n    return callback(brightness);\n  };\n};\n\nscrollToBottom = function() {\n  // On mobile scroll to loading\n  if( $(window).width() <= mobileWidth ) {\n    $('html, body').animate({\n      scrollTop: $('#main-content').offset().top - 13,\n    }, 'fast');\n  }\n};\n"],"sourceRoot":"/source/"}