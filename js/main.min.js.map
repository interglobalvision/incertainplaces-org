{"version":3,"sources":["main.js"],"names":["Site","init","this","windowWidth","$","window","innerWidth","windowHeight","innerHeight","marginBasic","parseInt","css","mobileWidth","fullWidth","bind","Layout","Menu","Tooltip","Mailchimp","Ajax","hasClass","Home","_this","resize","onResize","document","ready","initPerfectScrollbars","hashRoutes","logic","perfectScrollbar","suppressScrollX","location","hash","target","substr","destroySlideshow","openLevel1","on","load","height","analyzesSlides","click","removeClass","$homeSlides","homeSlideLength","length","each","background","data","detectBrightness","initSlideshow","homeSlideshow","setInterval","$active","activeIndex","next","index","eq","addClass","clearInterval","remove","show","$target","img","Modernizr","canvas","getImageBrightness","brightness","imageSrc","callback","colorSum","createElement","src","style","display","body","appendChild","onload","avg","b","ctx","g","imageData","len","r","x","width","getContext","drawImage","getImageData","Math","floor","$submenus","e","preventDefault","toggle","toggleClass","hide","Breadcrumbs","setLevelOne","setLevelTwo","parents","setLevelThree","clearAll","$ajaxContent","$ajaxLinks","$ajaxProjectLinks","$ajaxPracticingPlaceAbout","$ajaxArtistLinks","$ajaxStudentLinks","$ajaxMaLinks","ajaxLoad","html","afterAjaxLoad","textContent","href","unbind","off","scrollToBottom","title","cycle","history","pushState","imagesLoaded","animate","scrollTop","offset","top","keypress","which","trigger","submit","dataArray","url","stopPropagation","attr","replace","concat","serializeArray","item","name","value","ajax","dataType","error","err","text","l","alert","success","result","msg","val","$tooltip","tooltipOffset","mouseenter","image","mousemove","pageY","left","pageX","mouseleave","hover","children"],"mappings":"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","file":"main.min.js","sourcesContent":["var Site = {\n  init: function() {\n\n    // setup site vars\n    this.windowWidth = $(window).innerWidth();\n    this.windowHeight = $(window).innerHeight();\n    this.marginBasic = parseInt($('#main-container').css('padding-top'));\n    this.mobileWidth = 800;\n    this.fullWidth = 1487;\n\n    this.bind();\n\n    // init functionality\n    Site.Layout.init();\n    Site.Menu.init();\n    Site.Tooltip.init();\n    Site.Mailchimp.init();\n    Site.Ajax.init();\n\n    // if home\n    if ($('body').hasClass('home')) {\n      Site.Home.init();\n    }\n\n  },\n\n  bind: function() {\n    var _this = this;\n\n    $(window).resize(function() {\n      _this.onResize();\n    });\n\n    $(document).ready(function() {\n      _this.initPerfectScrollbars();\n      _this.hashRoutes();\n\n      Site.Layout.logic();\n    });\n\n  },\n\n  onResize: function() {\n    this.windowWidth = $(window).innerWidth();\n    this.windowHeight = $(window).innerHeight();\n\n    Site.Layout.onResize();\n  },\n\n  initPerfectScrollbars: function() {\n    // Init perfect scrollbar\n    $('.col-inner').perfectScrollbar({\n      'suppressScrollX': true,\n    });\n  },\n\n  hashRoutes: function() {\n    // Check for hash links\n    if (window.location.hash) {\n      var target = window.location.hash.substr(3);\n\n      if (target === 'menu') {\n        Site.Home.destroySlideshow();\n        window.location.hash = '';\n      } else {\n        Site.Menu.openLevel1(target);\n        window.location.hash = '';\n      }\n    }\n  },\n};\n\nSite.Layout = {\n  init: function() {\n    this.bind();\n    this.logic();\n  },\n\n  bind: function() {\n    var _this = this;\n\n    $(document).on({\n      'load': function() {\n        _this.logic();\n      },\n    });\n\n  },\n\n  onResize: function() {\n    this.logic();\n  },\n\n  logic: function() {\n\n    if (Site.windowWidth > Site.mobileWidth) {\n      return $('.col').css({\n        'height': (Site.windowHeight - Site.marginBasic) + 'px',\n      });\n    } else {\n      return $('.col').css({\n        'height': 'auto',\n      });\n    }\n\n  },\n};\n\nSite.Home = {\n  init: function() {\n    this.bind();\n    this.analyzesSlides();\n  },\n\n  bind: function() {\n    var _this = this;\n\n    // on click remove slideshow\n    $('#home-click').click(function() {\n      _this.destroySlideshow();\n      $('body').removeClass('active-slide-dark').removeClass('active-slide-light').removeClass('no-min-width');\n    });\n\n  },\n\n  analyzesSlides: function() {\n    var _this = this;\n\n    // detect brightness on home slides\n    _this.$homeSlides = $('.home-slide');\n    _this.homeSlideLength = this.$homeSlides.length;\n\n    _this.$homeSlides.each(function() {\n      var background = $(this).data('background');\n\n      return _this.detectBrightness($(this), background);\n    });\n\n    _this.initSlideshow();\n  },\n\n  initSlideshow: function() {\n    var _this = this;\n\n    // Set home slideshow looping, check brightness and set text color according\n    _this.homeSlideshow = window.setInterval(function() {\n      var $active, activeIndex, background, next;\n\n      if ($('#home-slides').length) {\n        $active = $('.home-slide.active');\n        activeIndex = $active.index();\n        $active.data('background', false);\n\n        if (activeIndex === (_this.homeSlideLength - 1)) {\n          _this.$homeSlides.css('opacity', 0).removeClass('active');\n          next = _this.$homeSlides.eq(0);\n          next.css('opacity', 1).addClass('active');\n          if (next.data('brightness')) {\n            return $('body').removeClass('active-slide-dark').removeClass('active-slide-light').addClass('active-slide-' + next.data('brightness'));\n          }\n\n        } else {\n          _this.$homeSlides.css('opacity', 0).removeClass('active');\n          next = _this.$homeSlides.eq(activeIndex + 1);\n          background = next.data('background');\n\n          if (next.data('background')) {\n            next.css('background-image', 'url(' + background + ')').data('background', false);\n          }\n\n          next.css('opacity', 1).addClass('active');\n\n          if (next.data('brightness')) {\n            return $('body').removeClass('active-slide-dark').removeClass('active-slide-light').addClass('active-slide-' + next.data('brightness'));\n          }\n        }\n      } else {\n        this.destroySlideshow();\n      }\n    }, 4500);\n\n  },\n\n  destroySlideshow: function() {\n    var _this = this;\n\n    window.clearInterval(_this.homeSlideshow);\n\n    $('#home-click').remove();\n    $('#home-slides').remove();\n\n    $('#menu').show();\n  },\n\n  detectBrightness: function($target, img) {\n    var _this = this;\n\n    if (Modernizr.canvas) {\n      return _this.getImageBrightness(img, function(brightness) {\n        if (brightness > 127.5) {\n          $target.addClass('font-dark').data('brightness', 'dark');\n          if ($target.hasClass('active')) {\n            return $('body').addClass('active-slide-dark');\n          }\n        } else {\n          $target.addClass('font-light').data('brightness', 'light');\n          if ($target.hasClass('active')) {\n            return $('body').addClass('active-slide-light');\n          }\n        }\n      });\n    }\n  },\n\n  getImageBrightness: function(imageSrc, callback) {\n    var colorSum, img;\n\n    img = document.createElement(\"img\");\n    img.src = imageSrc;\n    img.style.display = \"none\";\n    document.body.appendChild(img);\n    colorSum = 0;\n    img.onload = function() {\n      var avg, b, brightness, canvas, ctx, data, g, imageData, len, r, x;\n\n      canvas = document.createElement(\"canvas\");\n      canvas.width = this.width;\n      canvas.height = this.height;\n      ctx = canvas.getContext(\"2d\");\n      ctx.drawImage(this, 0, 0);\n      imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n      data = imageData.data;\n      r;\n      g;\n      b;\n      avg;\n      x = 0;\n      len = data.length;\n      while (x < len) {\n        r = data[x];\n        g = data[x + 1];\n        b = data[x + 2];\n        avg = Math.floor((r + g + b) / 3);\n        colorSum += avg;\n        x += 4;\n      }\n\n      brightness = Math.floor(colorSum / (this.width * this.height));\n      return callback(brightness);\n    };\n  },\n};\n\nSite.Menu = {\n  init: function() {\n    this.$submenus = $('.submenu');\n\n    this.bind();\n  },\n\n  bind: function() {\n    var _this = this;\n\n    $('.menu-item').click(function(e) {\n      var target = $(this).data('target');\n\n      // if desktop toggle drawers\n      if( Site.windowWidth > Site.mobileWidth ) {\n        if ($('.home').length) {\n          e.preventDefault();\n          $('#home-' + target).toggle();\n          $(this).toggleClass('active');\n          return Site.Layout.logic();\n\n        } else if (target === 'shop') {\n          // do nothing\n        } else if ($('.single-' + target).length || $('.post-type-archive-' + target).length) {\n          e.preventDefault();\n          $('.submenu-level-2').hide();\n          $('.submenu-level-3').hide();\n          $('#submenu-level-1').toggle();\n          return Site.Layout.logic();\n        }\n      }\n      // else, normal link behavior\n\n    });\n\n    $('.js-open-level-1').click(function(e) {\n      var target = $(this).data('target');\n\n      Site.Breadcrumbs.setLevelOne($(this));\n\n      _this.openLevel1(target);\n      return Site.Layout.logic();\n    });\n\n    $('.js-open-level-2').click(function(e) {\n      var target = $(this).data('target');\n\n      Site.Breadcrumbs.setLevelTwo($(this));\n\n      _this.$submenus.hide();\n\n      $('#submenu-level-1').show();\n\n      $(this).parents('.submenu-level-2').show();\n\n      $('.submenu-level-2 a').removeClass('active-ajax');\n\n      $('#submenu-' + target).show();\n\n      return Site.Layout.logic();\n    });\n\n  },\n\n  openLevel1: function(target) {\n    this.$submenus.hide();\n    $('#submenu-level-1').show();\n    return $('#submenu-' + target).show();\n  },\n};\n\nSite.Breadcrumbs = {\n  setLevelOne: function($target) {\n    $('.level-1-breadcrumb').removeClass('level-1-breadcrumb');\n    $target.addClass('level-1-breadcrumb');\n  },\n\n  setLevelTwo: function($target) {\n    $('.level-2-breadcrumb').removeClass('level-2-breadcrumb');\n    $target.addClass('level-2-breadcrumb');\n  },\n\n  setLevelThree: function($target) {\n    $('.level-3-breadcrumb').removeClass('level-3-breadcrumb');\n    $target.addClass('level-3-breadcrumb');\n  },\n\n  clearAll: function() {\n    $('.level-1-breadcrumb').removeClass('level-2-breadcrumb');\n    $('.level-2-breadcrumb').removeClass('level-2-breadcrumb');\n    $('.level-3-breadcrumb').removeClass('level-3-breadcrumb');\n  },\n};\n\nSite.Ajax = {\n  init: function() {\n\n    this.$ajaxContent = $('#ajax-content');\n\n    this.$ajaxLinks = $('.js-ajax');\n    this.$ajaxProjectLinks = $('.js-ajax-projects');\n    this.$ajaxPracticingPlaceAbout = $('.js-ajax-pp-about');\n    this.$ajaxArtistLinks = $('.js-ajax-artists');\n    this.$ajaxStudentLinks = $('.js-ajax-students');\n    this.$ajaxMaLinks = $('.js-open-ma-information');\n\n    this.bind();\n  },\n\n  bind: function() {\n    var _this = this;\n\n    _this.$ajaxLinks.click(function(e) {\n      _this.ajaxLoad(e);\n    });\n\n    _this.$ajaxProjectLinks.on('click.ajax', function(e) {\n      if ($('.single-projects').length || $('.post-type-archive-projects').length) {\n        Site.Breadcrumbs.setLevelThree($(this));\n        _this.ajaxLoad(e);\n      }\n    });\n\n    _this.$ajaxPracticingPlaceAbout.on('click.ajax', function(e) {\n      if ($('.single-projects').length || $('.post-type-archive-projects').length) {\n        Site.Breadcrumbs.setLevelTwo($(this));\n        $('.submenu-level-3').hide();\n        _this.ajaxLoad(e);\n      }\n    });\n\n    _this.$ajaxArtistLinks.on('click.ajax', function(e) {\n      if ($('.single-artists').length || $('.post-type-archive-artists').length) {\n        Site.Breadcrumbs.setLevelOne($(this));\n        _this.ajaxLoad(e);\n      }\n    });\n\n    _this.$ajaxStudentLinks.on('click.ajax', function(e) {\n      if ($('.single-students').length || $('.post-type-archive-students').length || $('.page').length) {\n        Site.Breadcrumbs.setLevelTwo($(this));\n        _this.ajaxLoad(e);\n      }\n    });\n\n    _this.$ajaxMaLinks.on('click.ajax', function(e) {\n      e.preventDefault();\n\n      Site.Breadcrumbs.setLevelOne($(this));\n\n      Site.Menu.$submenus.hide();\n\n      _this.$ajaxStudentLinks.removeClass('active-ajax');\n\n      $('#submenu-level-1').show();\n\n      var target = $(this).data('target');\n\n       _this.$ajaxContent.html('loading...').load(target + ' article.js-content', function() {\n\n       _this.afterAjaxLoad(e.target.textContent, e.target.href);\n      }).show();\n    });\n\n  },\n\n  unbind: function() {\n    var _this = this;\n\n    $('.js-ajax, .js-ajax-projects, .js-ajax-artists, .js-ajax-students, .js-open-ma-information').off('.ajax');\n  },\n\n  ajaxLoad: function(e) {\n    var _this = this;\n\n    e.preventDefault();\n    _this.$ajaxContent.html('loading...').load(e.target.href + ' article.js-content', function() {\n      return _this.afterAjaxLoad(e.target.textContent, e.target.href);\n    }).show();\n    _this.scrollToBottom();\n    _this.$ajaxLinks.removeClass('active-ajax');\n    return $(this).addClass('active-ajax');\n  },\n\n  afterAjaxLoad: function(title, href) {\n    var _this = this;\n\n    // init Slideshows\n    $('.cycle-slideshow').cycle();\n\n    // if supports history api set url\n    if (Modernizr.history) {\n      history.pushState(null, title, href);\n    }\n\n    // re-init scrollbars by destroying first\n    $('#main-content').imagesLoaded(function() {\n      return $('#ajax-content').perfectScrollbar('destroy').perfectScrollbar({\n        'suppressScrollX': true,\n      });\n    });\n\n    // unbind ajax links\n    _this.unbind();\n\n    // reinit site\n    return Site.init();\n  },\n\n  scrollToBottom: function() {\n    // on mobile scroll to loading\n    if ( Site.windowWidth <= Site.mobileWidth ) {\n      $('html, body').animate({\n        scrollTop: $('#main-content').offset().top - 13,\n      }, 'fast');\n    }\n  },\n};\n\nSite.Mailchimp = {\n  init: function() {\n    this.bind();\n  },\n\n  bind: function() {\n    $('#mce-EMAIL').keypress(function(e) {\n      if (e.which === 10 || e.which === 13) {\n        return $('#mc-embedded-subscribe-form').trigger('submit');\n      }\n    });\n\n    $('#mc-embedded-subscribe-form').submit(function(e) {\n      var data, dataArray, url;\n\n      e.preventDefault();\n      e.stopPropagation();\n      url = $(this).attr('action').replace('/post?', '/post-json?').concat('&c=?');\n      data = {};\n      dataArray = $(this).serializeArray();\n      $.each(dataArray, function(index, item) {\n        data[item.name] = item.value;\n      });\n\n      $.ajax({\n        url: url,\n        data: data,\n        dataType: 'jsonp',\n        error: function(err, text) {\n          l(\"Mailchimp error:\");\n          l(text);\n          l(err);\n          return alert(\"Subscription failure.\");\n        },\n\n        success: function(data) {\n          if (data.result === \"success\") {\n            $('#mc-embedded-subscribe-form').hide();\n            return $('#mc-embedded-subscribe-thanks').show();\n          } else {\n            l(data);\n            return alert(\"Subscription failure. \" + data.msg);\n          }\n        },\n      });\n      return $('#mce-EMAIL').val('');\n    });\n  },\n};\n\nSite.Tooltip = {\n  init: function() {\n    this.$tooltip = $('#tooltip');\n    this.tooltipOffset = 10;\n\n    this.bind();\n  },\n\n  bind: function() {\n    var _this = this;\n\n    if ($('html').hasClass('no-touch')) {\n      $('.js-tooltip').on({\n        'mouseenter': function() {\n          var image = $(this).data('hover-image');\n\n          _this.$tooltip.attr('src', image).show();\n\n          return $(window).mousemove(function(e) {\n            return _this.$tooltip.css({\n              'top': (e.pageY + _this.tooltipOffset) + 'px',\n              'left': (e.pageX + _this.tooltipOffset) + 'px',\n            });\n          });\n        },\n\n        'mouseleave': function() {\n          $(window).off();\n          return _this.$tooltip.hide();\n        },\n      });\n    }\n\n    $('.has-hover-image').hover(function() {\n      if (!$(this).hasClass('js-lazy-loaded')) {\n        var target = $(this).children().children();\n\n        target.attr('src', target.data('src'));\n        return $(this).addClass('js-lazy-loaded');\n      }\n    });\n  },\n};\n\nSite.init();"],"sourceRoot":"/source/"}