var Site={init:function(){this.windowWidth=$(window).innerWidth(),this.windowHeight=$(window).innerHeight(),this.marginBasic=parseInt($("#main-container").css("padding-top")),this.mobileWidth=600,this.fullWidth=1487,this.bind(),Site.Layout.init(),Site.Menu.init(),Site.Tooltip.init(),Site.Mailchimp.init(),Site.Ajax.init(),$("body").hasClass("home")&&Site.Home.init()},bind:function(){var t=this;$(window).resize(function(){t.onResize()}),$(document).ready(function(){t.initPerfectScrollbars(),t.hashRoutes(),Site.Layout.logic()})},onResize:function(){this.windowWidth=$(window).innerWidth(),this.windowHeight=$(window).innerHeight(),Site.Layout.onResize()},initPerfectScrollbars:function(){$(".col-inner").perfectScrollbar({suppressScrollX:!0})},hashRoutes:function(){if(window.location.hash){var t=window.location.hash.substr(3);"menu"===t?(Site.Home.destroySlideshow(),window.location.hash=""):(Site.Menu.openLevel1(t),window.location.hash="")}}};Site.Layout={init:function(){this.bind(),this.logic()},bind:function(){var t=this;$(document).on({load:function(){t.logic()}})},onResize:function(){this.logic()},logic:function(){return Site.windowWidth>Site.mobileWidth?$(".col").css({height:Site.windowHeight-Site.marginBasic+"px"}):$(".col").css({height:"auto"})}},Site.Home={init:function(){this.bind(),this.analyzesSlides()},bind:function(){var t=this;$("#home-click").click(function(){t.destroySlideshow(),$("body").removeClass("active-slide-dark").removeClass("active-slide-light").removeClass("no-min-width")})},analyzesSlides:function(){var t=this;t.$homeSlides=$(".home-slide"),t.homeSlideLength=this.$homeSlides.length,t.$homeSlides.each(function(){var e=$(this).data("background");return t.detectBrightness($(this),e)}),t.initSlideshow()},initSlideshow:function(){var t=this;t.homeSlideshow=window.setInterval(function(){var e,i,n,a;if($("#home-slides").length){if(e=$(".home-slide.active"),i=e.index(),e.data("background",!1),i===t.homeSlideLength-1){if(t.$homeSlides.css("opacity",0).removeClass("active"),a=t.$homeSlides.eq(0),a.css("opacity",1).addClass("active"),a.data("brightness"))return $("body").removeClass("active-slide-dark").removeClass("active-slide-light").addClass("active-slide-"+a.data("brightness"))}else if(t.$homeSlides.css("opacity",0).removeClass("active"),a=t.$homeSlides.eq(i+1),n=a.data("background"),a.data("background")&&a.css("background-image","url("+n+")").data("background",!1),a.css("opacity",1).addClass("active"),a.data("brightness"))return $("body").removeClass("active-slide-dark").removeClass("active-slide-light").addClass("active-slide-"+a.data("brightness"))}else this.destroySlideshow()},4500)},destroySlideshow:function(){var t=this;window.clearInterval(t.homeSlideshow),$("#home-click").remove(),$("#home-slides").remove(),$("#menu").show()},detectBrightness:function(t,e){var i=this;return Modernizr.canvas?i.getImageBrightness(e,function(e){if(e>127.5){if(t.addClass("font-dark").data("brightness","dark"),t.hasClass("active"))return $("body").addClass("active-slide-dark")}else if(t.addClass("font-light").data("brightness","light"),t.hasClass("active"))return $("body").addClass("active-slide-light")}):void 0},getImageBrightness:function(t,e){var i,n;n=document.createElement("img"),n.src=t,n.style.display="none",document.body.appendChild(n),i=0,n.onload=function(){var t,n,a,s,o,r,l,c,h,d,u;for(s=document.createElement("canvas"),s.width=this.width,s.height=this.height,o=s.getContext("2d"),o.drawImage(this,0,0),c=o.getImageData(0,0,s.width,s.height),r=c.data,u=0,h=r.length;h>u;)d=r[u],l=r[u+1],n=r[u+2],t=Math.floor((d+l+n)/3),i+=t,u+=4;return a=Math.floor(i/(this.width*this.height)),e(a)}}},Site.Menu={init:function(){this.$submenus=$(".submenu"),this.bind()},bind:function(){var t=this;$(".menu-item").click(function(t){var e=$(this).data("target");if(Site.windowWidth>Site.mobileWidth){if($(".home").length)return t.preventDefault(),$("#home-"+e).toggle(),$(this).toggleClass("active"),Site.Layout.logic();if("shop"===e);else if($(".single-"+e).length||$(".post-type-archive-"+e).length)return t.preventDefault(),$(".submenu-level-2").hide(),$(".submenu-level-3").hide(),$("#submenu-level-1").toggle(),Site.Layout.logic()}}),$(".js-open-level-1").click(function(e){var i=$(this).data("target");return t.openLevel1(i),Site.Layout.logic()}),$(".js-open-level-2").click(function(e){var i=$(this).data("target");return t.$submenus.hide(),$("#submenu-level-1").show(),$(this).parents(".submenu-level-2").show(),$(".submenu-level-2 a").removeClass("active-ajax"),$("#submenu-"+i).show(),Site.Layout.logic()})},openLevel1:function(t){return this.$submenus.hide(),$("#submenu-level-1").show(),$("#submenu-"+t).show()}},Site.Ajax={init:function(){this.$ajaxContent=$("#ajax-content"),this.$ajaxLinks=$(".js-ajax"),this.$ajaxProjectLinks=$(".js-ajax-projects"),this.$ajaxArtistLinks=$(".js-ajax-artists"),this.$ajaxStudentLinks=$(".js-ajax-students"),this.$ajaxMaLinks=$(".js-open-ma-information"),this.bind()},bind:function(){var t=this;t.$ajaxLinks.click(function(e){t.ajaxLoad(e)}),t.$ajaxProjectLinks.on("click.ajax",function(e){($(".single-projects").length||$(".post-type-archive-projects").length)&&t.ajaxLoad(e)}),t.$ajaxArtistLinks.on("click.ajax",function(e){($(".single-artists").length||$(".post-type-archive-artists").length)&&t.ajaxLoad(e)}),t.$ajaxStudentLinks.on("click.ajax",function(e){($(".single-students").length||$(".post-type-archive-students").length||$(".page").length)&&t.ajaxLoad(e)}),t.$ajaxMaLinks.on("click.ajax",function(e){e.preventDefault(),Site.Menu.$submenus.hide(),t.$ajaxStudentLinks.removeClass("active-ajax"),$("#submenu-level-1").show();var i=$(this).data("target");t.$ajaxContent.html("loading...").load(i+" article.js-content",function(){t.afterAjaxLoad(e.target.textContent,e.target.href)}).show()})},unbind:function(){$(".js-ajax, .js-ajax-projects, .js-ajax-artists, .js-ajax-students, .js-open-ma-information").off(".ajax")},ajaxLoad:function(t){var e=this;return t.preventDefault(),e.$ajaxContent.html("loading...").load(t.target.href+" article.js-content",function(){return e.afterAjaxLoad(t.target.textContent,t.target.href)}).show(),e.scrollToBottom(),e.$ajaxLinks.removeClass("active-ajax"),$(this).addClass("active-ajax")},afterAjaxLoad:function(t,e){var i=this;return $(".cycle-slideshow").cycle(),Modernizr.history&&history.pushState(null,t,e),$("#main-content").imagesLoaded(function(){return $("#ajax-content").perfectScrollbar("destroy").perfectScrollbar({suppressScrollX:!0})}).animate({scrollTop:0},"fast"),i.scrollToBottom(),i.unbind(),Site.init()},scrollToBottom:function(){Site.windowWidth<=Site.mobileWidth&&$("html, body").animate({scrollTop:$("#main-content").offset().top-13},"fast")}},Site.Mailchimp={init:function(){this.bind()},bind:function(){$("#mce-EMAIL").keypress(function(t){return 10===t.which||13===t.which?$("#mc-embedded-subscribe-form").trigger("submit"):void 0}),$("#mc-embedded-subscribe-form").submit(function(t){var e,i,n;return t.preventDefault(),t.stopPropagation(),n=$(this).attr("action").replace("/post?","/post-json?").concat("&c=?"),e={},i=$(this).serializeArray(),$.each(i,function(t,i){e[i.name]=i.value}),$.ajax({url:n,data:e,dataType:"jsonp",error:function(t,e){return l("Mailchimp error:"),l(e),l(t),alert("Subscription failure.")},success:function(t){return"success"===t.result?($("#mc-embedded-subscribe-form").hide(),$("#mc-embedded-subscribe-thanks").show()):(l(t),alert("Subscription failure. "+t.msg))}}),$("#mce-EMAIL").val("")})}},Site.Tooltip={init:function(){this.$tooltip=$("#tooltip"),this.tooltipOffset=10,this.bind()},bind:function(){var t=this;$("html").hasClass("no-touch")&&$(".js-tooltip").on({mouseenter:function(){var e=$(this).data("hover-image");return t.$tooltip.attr("src",e).show(),$(window).mousemove(function(e){return t.$tooltip.css({top:e.pageY+t.tooltipOffset+"px",left:e.pageX+t.tooltipOffset+"px"})})},mouseleave:function(){return $(window).off(),t.$tooltip.hide()}}),$(".has-hover-image").hover(function(){if(!$(this).hasClass("js-lazy-loaded")){var t=$(this).children().children();return t.attr("src",t.data("src")),$(this).addClass("js-lazy-loaded")}})}},Site.init();
//# sourceMappingURL=main.min.js.map
