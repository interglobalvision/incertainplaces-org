var afterAjaxLoad,ajaxContent,detectBrightness,fullWidth,getImageBrightness,init,l,layout,marginBasic,openLevel1,removeHomeSlides,submenus,windowHeight,windowWidth;fullWidth=1487,mobileWidth=600,l=function(e){return console.log(e)},windowWidth=$(window).innerWidth(),windowHeight=$(window).innerHeight(),marginBasic=parseInt($("#main-container").css("padding-top")),submenus=$(".submenu"),ajaxContent=$("#ajax-content"),init=function(){$(window).on({resize:function(){layout()}})},$(document).on({load:function(){init(),layout()}}),$(document).ready(function(e){var t,a,n,i,o,s,r,c,d,h;return window.location.hash&&(c=window.location.hash.substr(3),"menu"===c?(removeHomeSlides(),window.location.hash=""):(openLevel1(c),window.location.hash="")),e(".col-inner").perfectScrollbar({suppressScrollX:!0}),layout(),e("body").hasClass("home")&&(o=e(".home-slide"),s=o.length,o.each(function(){var t;return t=e(this).data("background"),detectBrightness(e(this),t)}),r=window.setInterval(function(){var t,a,n,i;if(!e("#home-slides").length)return window.clearInterval(r);if(t=e(".home-slide.active"),a=t.index(),t.data("background",!1),a===s-1){if(o.css("opacity",0).removeClass("active"),i=o.eq(0),i.css("opacity",1).addClass("active"),i.data("brightness"))return e("body").removeClass("active-slide-dark").removeClass("active-slide-light").addClass("active-slide-"+i.data("brightness"))}else if(o.css("opacity",0).removeClass("active"),i=o.eq(a+1),n=i.data("background"),i.data("background")&&i.css("background-image","url("+n+")").data("background",!1),i.css("opacity",1).addClass("active"),i.data("brightness"))return e("body").removeClass("active-slide-dark").removeClass("active-slide-light").addClass("active-slide-"+i.data("brightness"))},4500),e("#home-click").click(function(){return removeHomeSlides(),window.clearInterval(r),e("body").removeClass("active-slide-dark").removeClass("active-slide-light").removeClass("no-min-width")})),e(".menu-item").click(function(t){if(c=e(this).data("target"),e(window).width()>mobileWidth){if(e(".home").length)return t.preventDefault(),e("#home-"+c).toggle(),e(this).toggleClass("active"),layout();if("shop"===c);else if(e(".single-"+c).length||e(".post-type-archive-"+c).length)return t.preventDefault(),e(".submenu-level-2").hide(),e(".submenu-level-3").hide(),e("#submenu-level-1").toggle(),layout()}}),e(".js-open-level-1").click(function(t){return c=e(this).data("target"),openLevel1(c),layout()}),e(".js-open-level-2").click(function(t){return c=e(this).data("target"),submenus.hide(),e("#submenu-level-1").show(),e(this).parents(".submenu-level-2").show(),e(".submenu-level-2 a").removeClass("active-ajax"),e("#submenu-"+c).show(),layout()}),e("html").hasClass("no-touch")&&(d=e("#tooltip"),h=10,e(".js-tooltip").on({mouseenter:function(){var t;return t=e(this).data("hover-image"),d.attr("src",t).show(),e(window).mousemove(function(e){return d.css({top:e.pageY+h+"px",left:e.pageX+h+"px"})})},mouseleave:function(){return e(window).off(),d.hide()}})),e(".has-hover-image").hover(function(){return e(this).hasClass("js-lazy-loaded")?void 0:(c=e(this).children().children(),c.attr("src",c.data("src")),e(this).addClass("js-lazy-loaded"))}),e("#mce-EMAIL").keypress(function(t){return 10===t.which||13===t.which?e("#mc-embedded-subscribe-form").trigger("submit"):void 0}),e("#mc-embedded-subscribe-form").submit(function(t){var a,n,i;return t.preventDefault(),t.stopPropagation(),i=e(this).attr("action").replace("/post?","/post-json?").concat("&c=?"),a={},n=e(this).serializeArray(),e.each(n,function(e,t){return a[t.name]=t.value}),e.ajax({url:i,data:a,dataType:"jsonp",error:function(e,t){return l("Mailchimp error:"),l(t),l(e),alert("Subscription failure.")},success:function(t){return"success"===t.result?(e("#mc-embedded-subscribe-form").hide(),e("#mc-embedded-subscribe-thanks").show()):(l(t),alert("Subscription failure. "+t.msg))}}),e("#mce-EMAIL").val("")}),a=e(".js-ajax"),a.click(function(t){return t.preventDefault(),ajaxContent.html("loading...").load(t.target.href+" article.js-content",function(){return afterAjaxLoad(t.target.textContent,t.target.href)}).show(),scrollToBottom(),a.removeClass("active-ajax"),e(this).addClass("active-ajax")}),n=e(".js-ajax-projects"),n.click(function(t){return e(".single-projects").length||e(".post-type-archive-projects").length?(t.preventDefault(),ajaxContent.html("loading...").load(t.target.href+" article.js-content",function(){return afterAjaxLoad(t.target.textContent,t.target.href)}).show(),scrollToBottom(),n.removeClass("active-ajax"),e(this).addClass("active-ajax")):void 0}),t=e(".js-ajax-artists"),t.click(function(a){return e(".single-artists").length||e(".post-type-archive-artists").length?(a.preventDefault(),ajaxContent.html("loading...").load(a.target.href+" article.artists",function(){return afterAjaxLoad(a.target.textContent,a.target.href)}).show(),scrollToBottom(),t.removeClass("active-ajax"),e(this).addClass("active-ajax")):void 0}),i=e(".js-ajax-students"),i.click(function(t){return e(".single-students").length||e(".post-type-archive-students").length||e(".page").length?(t.preventDefault(),ajaxContent.html("loading...").load(t.target.href+" article.students",function(){return afterAjaxLoad(t.target.textContent,t.target.href)}).show(),scrollToBottom(),i.removeClass("active-ajax"),e(this).addClass("active-ajax")):void 0}),e(".js-open-ma-information").click(function(t){return t.preventDefault(),submenus.hide(),i.removeClass("active-ajax"),e("#submenu-level-1").show(),c=e(this).data("target"),ajaxContent.html("loading...").load(c+" article.js-content",function(){return e(".cycle-slideshow").cycle(),Modernizr.history&&history.pushState(null,null,c),content.imagesLoaded(function(){return layout()}).animate({scrollTop:0},"fast")}).show()})}),layout=function(){return windowWidth=$(window).innerWidth(),windowHeight=$(window).innerHeight(),windowWidth>mobileWidth?$(".col").css({height:windowHeight-marginBasic+"px"}):$(".col").css({height:"auto"})},afterAjaxLoad=function(e,t){return $(".cycle-slideshow").cycle(),Modernizr.history&&history.pushState(null,e,t),$("#main-content").imagesLoaded(function(){return $("#ajax-content").perfectScrollbar("destroy").perfectScrollbar({suppressScrollX:!0})}).animate({scrollTop:0},"fast"),$(window).width()<=mobileWidth&&$("html, body").animate({scrollTop:$("#main-content").offset().top-13},"fast"),init()},removeHomeSlides=function(){return $("#home-click").remove(),$("#home-slides").remove(),$("#menu").show()},openLevel1=function(e){return submenus.hide(),$("#submenu-level-1").show(),$("#submenu-"+e).show()},detectBrightness=function(e,t){return Modernizr.canvas?getImageBrightness(t,function(t){if(t>127.5){if(e.addClass("font-dark").data("brightness","dark"),e.hasClass("active"))return $("body").addClass("active-slide-dark")}else if(e.addClass("font-light").data("brightness","light"),e.hasClass("active"))return $("body").addClass("active-slide-light")}):void 0},getImageBrightness=function(e,t){var a,n;return n=document.createElement("img"),n.src=e,n.style.display="none",document.body.appendChild(n),a=0,n.onload=function(){var e,n,i,o,s,r,l,c,d,h,u;for(o=document.createElement("canvas"),o.width=this.width,o.height=this.height,s=o.getContext("2d"),s.drawImage(this,0,0),c=s.getImageData(0,0,o.width,o.height),r=c.data,u=0,d=r.length;d>u;)h=r[u],l=r[u+1],n=r[u+2],e=Math.floor((h+l+n)/3),a+=e,u+=4;return i=Math.floor(a/(this.width*this.height)),t(i)}},scrollToBottom=function(){$(window).width()<=mobileWidth&&$("html, body").animate({scrollTop:$("#main-content").offset().top-13},"fast")};
//# sourceMappingURL=main.min.js.map
