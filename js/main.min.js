var Site={init:function(){this.windowWidth=$(window).innerWidth(),this.windowHeight=$(window).innerHeight(),this.marginBasic=parseInt($("#main-container").css("padding-top")),this.mobileWidth=600,this.fullWidth=1487,this.bind(),Site.Layout.init(),Site.Menu.init(),Site.Tooltip.init(),Site.Mailchimp.init(),Site.Ajax.init(),$("body").hasClass("home")&&Site.Home.init()},bind:function(){var e=this;$(window).resize(function(){e.onResize()}),$(document).ready(function(){e.initPerfectScrollbars(),e.hashRoutes(),Site.Layout.logic()})},onResize:function(){this.windowWidth=$(window).innerWidth(),this.windowHeight=$(window).innerHeight(),Site.Layout.onResize()},initPerfectScrollbars:function(){$(".col-inner").perfectScrollbar({suppressScrollX:!0})},hashRoutes:function(){if(window.location.hash){var e=window.location.hash.substr(3);"menu"===e?(Site.Home.destroySlideshow(),window.location.hash=""):(Site.Menu.openLevel1(e),window.location.hash="")}}};Site.Layout={init:function(){this.bind(),this.logic()},bind:function(){var e=this;$(document).on({load:function(){e.logic()}})},onResize:function(){this.logic()},logic:function(){return Site.windowWidth>Site.mobileWidth?$(".col").css({height:Site.windowHeight-Site.marginBasic+"px"}):$(".col").css({height:"auto"})}},Site.Home={init:function(){this.bind(),this.analyzesSlides()},bind:function(){var e=this;$("#home-click").click(function(){e.destroySlideshow(),$("body").removeClass("active-slide-dark").removeClass("active-slide-light").removeClass("no-min-width")})},analyzesSlides:function(){var e=this;e.$homeSlides=$(".home-slide"),e.homeSlideLength=this.$homeSlides.length,e.$homeSlides.each(function(){var t=$(this).data("background");return e.detectBrightness($(this),t)}),e.initSlideshow()},initSlideshow:function(){var e=this;e.homeSlideshow=window.setInterval(function(){var t,i,a,s;if($("#home-slides").length){if(t=$(".home-slide.active"),i=t.index(),t.data("background",!1),i===e.homeSlideLength-1){if(e.$homeSlides.css("opacity",0).removeClass("active"),s=e.$homeSlides.eq(0),s.css("opacity",1).addClass("active"),s.data("brightness"))return $("body").removeClass("active-slide-dark").removeClass("active-slide-light").addClass("active-slide-"+s.data("brightness"))}else if(e.$homeSlides.css("opacity",0).removeClass("active"),s=e.$homeSlides.eq(i+1),a=s.data("background"),s.data("background")&&s.css("background-image","url("+a+")").data("background",!1),s.css("opacity",1).addClass("active"),s.data("brightness"))return $("body").removeClass("active-slide-dark").removeClass("active-slide-light").addClass("active-slide-"+s.data("brightness"))}else this.destroySlideshow()},4500)},destroySlideshow:function(){var e=this;window.clearInterval(e.homeSlideshow),$("#home-click").remove(),$("#home-slides").remove(),$("#menu").show()},detectBrightness:function(e,t){var i=this;return Modernizr.canvas?i.getImageBrightness(t,function(t){if(t>127.5){if(e.addClass("font-dark").data("brightness","dark"),e.hasClass("active"))return $("body").addClass("active-slide-dark")}else if(e.addClass("font-light").data("brightness","light"),e.hasClass("active"))return $("body").addClass("active-slide-light")}):void 0},getImageBrightness:function(e,t){var i,a;a=document.createElement("img"),a.src=e,a.style.display="none",document.body.appendChild(a),i=0,a.onload=function(){var e,a,s,n,o,r,l,c,d,h,u;for(n=document.createElement("canvas"),n.width=this.width,n.height=this.height,o=n.getContext("2d"),o.drawImage(this,0,0),c=o.getImageData(0,0,n.width,n.height),r=c.data,u=0,d=r.length;d>u;)h=r[u],l=r[u+1],a=r[u+2],e=Math.floor((h+l+a)/3),i+=e,u+=4;return s=Math.floor(i/(this.width*this.height)),t(s)}}},Site.Menu={init:function(){this.$submenus=$(".submenu"),this.bind()},bind:function(){var e=this;$(".menu-item").click(function(e){var t=$(this).data("target");if(Site.windowWidth>Site.mobileWidth){if($(".home").length)return e.preventDefault(),$("#home-"+t).toggle(),$(this).toggleClass("active"),Site.Layout.logic();if("shop"===t);else if($(".single-"+t).length||$(".post-type-archive-"+t).length)return e.preventDefault(),$(".submenu-level-2").hide(),$(".submenu-level-3").hide(),$("#submenu-level-1").toggle(),Site.Layout.logic()}}),$(".js-open-level-1").click(function(t){var i=$(this).data("target");return Site.Breadcrumbs.setLevelOne($(this)),e.openLevel1(i),Site.Layout.logic()}),$(".js-open-level-2").click(function(t){var i=$(this).data("target");return Site.Breadcrumbs.setLevelTwo($(this)),e.$submenus.hide(),$("#submenu-level-1").show(),$(this).parents(".submenu-level-2").show(),$(".submenu-level-2 a").removeClass("active-ajax"),$("#submenu-"+i).show(),Site.Layout.logic()})},openLevel1:function(e){return this.$submenus.hide(),$("#submenu-level-1").show(),$("#submenu-"+e).show()}},Site.Breadcrumbs={setLevelOne:function(e){$(".level-1-breadcrumb").removeClass("level-1-breadcrumb"),e.addClass("level-1-breadcrumb")},setLevelTwo:function(e){$(".level-2-breadcrumb").removeClass("level-2-breadcrumb"),e.addClass("level-2-breadcrumb")},setLevelThree:function(e){$(".level-3-breadcrumb").removeClass("level-3-breadcrumb"),e.addClass("level-3-breadcrumb")},clearAll:function(){$(".level-1-breadcrumb").removeClass("level-2-breadcrumb"),$(".level-2-breadcrumb").removeClass("level-2-breadcrumb"),$(".level-3-breadcrumb").removeClass("level-3-breadcrumb")}},Site.Ajax={init:function(){this.$ajaxContent=$("#ajax-content"),this.$ajaxLinks=$(".js-ajax"),this.$ajaxProjectLinks=$(".js-ajax-projects"),this.$ajaxPracticingPlaceAbout=$(".js-ajax-pp-about"),this.$ajaxArtistLinks=$(".js-ajax-artists"),this.$ajaxStudentLinks=$(".js-ajax-students"),this.$ajaxMaLinks=$(".js-open-ma-information"),this.bind()},bind:function(){var e=this;e.$ajaxLinks.click(function(t){e.ajaxLoad(t)}),e.$ajaxProjectLinks.on("click.ajax",function(t){($(".single-projects").length||$(".post-type-archive-projects").length)&&(Site.Breadcrumbs.setLevelThree($(this)),e.ajaxLoad(t))}),e.$ajaxPracticingPlaceAbout.on("click.ajax",function(t){($(".single-projects").length||$(".post-type-archive-projects").length)&&(Site.Breadcrumbs.setLevelTwo($(this)),$(".submenu-level-3").hide(),e.ajaxLoad(t))}),e.$ajaxArtistLinks.on("click.ajax",function(t){($(".single-artists").length||$(".post-type-archive-artists").length)&&(Site.Breadcrumbs.setLevelOne($(this)),e.ajaxLoad(t))}),e.$ajaxStudentLinks.on("click.ajax",function(t){($(".single-students").length||$(".post-type-archive-students").length||$(".page").length)&&(Site.Breadcrumbs.setLevelTwo($(this)),e.ajaxLoad(t))}),e.$ajaxMaLinks.on("click.ajax",function(t){t.preventDefault(),Site.Breadcrumbs.setLevelOne($(this)),Site.Menu.$submenus.hide(),e.$ajaxStudentLinks.removeClass("active-ajax"),$("#submenu-level-1").show();var i=$(this).data("target");e.$ajaxContent.html("loading...").load(i+" article.js-content",function(){e.afterAjaxLoad(t.target.textContent,t.target.href)}).show()})},unbind:function(){$(".js-ajax, .js-ajax-projects, .js-ajax-artists, .js-ajax-students, .js-open-ma-information").off(".ajax")},ajaxLoad:function(e){var t=this;return e.preventDefault(),t.$ajaxContent.html("loading...").load(e.target.href+" article.js-content",function(){return t.afterAjaxLoad(e.target.textContent,e.target.href)}).show(),t.scrollToBottom(),t.$ajaxLinks.removeClass("active-ajax"),$(this).addClass("active-ajax")},afterAjaxLoad:function(e,t){var i=this;return $(".cycle-slideshow").cycle(),Modernizr.history&&history.pushState(null,e,t),$("#main-content").imagesLoaded(function(){return $("#ajax-content").perfectScrollbar("destroy").perfectScrollbar({suppressScrollX:!0})}),i.unbind(),Site.init()},scrollToBottom:function(){Site.windowWidth<=Site.mobileWidth&&$("html, body").animate({scrollTop:$("#main-content").offset().top-13},"fast")}},Site.Mailchimp={init:function(){this.bind()},bind:function(){$("#mce-EMAIL").keypress(function(e){return 10===e.which||13===e.which?$("#mc-embedded-subscribe-form").trigger("submit"):void 0}),$("#mc-embedded-subscribe-form").submit(function(e){var t,i,a;return e.preventDefault(),e.stopPropagation(),a=$(this).attr("action").replace("/post?","/post-json?").concat("&c=?"),t={},i=$(this).serializeArray(),$.each(i,function(e,i){t[i.name]=i.value}),$.ajax({url:a,data:t,dataType:"jsonp",error:function(e,t){return l("Mailchimp error:"),l(t),l(e),alert("Subscription failure.")},success:function(e){return"success"===e.result?($("#mc-embedded-subscribe-form").hide(),$("#mc-embedded-subscribe-thanks").show()):(l(e),alert("Subscription failure. "+e.msg))}}),$("#mce-EMAIL").val("")})}},Site.Tooltip={init:function(){this.$tooltip=$("#tooltip"),this.tooltipOffset=10,this.bind()},bind:function(){var e=this;$("html").hasClass("no-touch")&&$(".js-tooltip").on({mouseenter:function(){var t=$(this).data("hover-image");return e.$tooltip.attr("src",t).show(),$(window).mousemove(function(t){return e.$tooltip.css({top:t.pageY+e.tooltipOffset+"px",left:t.pageX+e.tooltipOffset+"px"})})},mouseleave:function(){return $(window).off(),e.$tooltip.hide()}}),$(".has-hover-image").hover(function(){if(!$(this).hasClass("js-lazy-loaded")){var e=$(this).children().children();return e.attr("src",e.data("src")),$(this).addClass("js-lazy-loaded")}})}},Site.init();
//# sourceMappingURL=main.min.js.map
